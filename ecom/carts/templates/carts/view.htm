{% extends 'base.htm' %} {% block content %}

<div class="container">
    <h1>CARTS</h1>
    {% if cart.products.exists %}
    <table class="table">
        <thead>
            <tr>
                <th>#</th>
                <th>Product Name</th>
                <th>Action</th>
                <th>Product Price</th>
            </tr>
        </thead>
        <tbody>
            {% for product in cart.products.all %}
            <tr>
                <th scope="row">{{ forloop.counter }}</th>
                <td><a href='{{ product.get_absolute_url }}'>{{ product.title }}</a></td>
                <td> {% include 'products/snippets/update_cart.htm' with product=product cart=cart in_cart=True %} </td>
                <td>{{ product.price }}</td>
            </tr>
            {% endfor %}
            <tr>
                <td colspan="3"></td>
                <td><b>Subtotal</b> {{ cart.subtotal }}</td>
            </tr>
            <tr>
                <td colspan="3"></td>
                <td><b>Total</b> {{ cart.total }}</td>
            </tr>
        </tbody>
    </table>

    {% else %} {% if request.user.is_authenticated %}
    <p class='lead'>Cart is empty</p>
    {% else %}
    <p class='lead'>Login To see your cart</p>
    {% endif %} {% endif %}
</div>
{% endblock %}